---
const faqs = [
  {
    "question": "¿A partir de cuántos metros puedo añadir un ennoblecimiento textil específico?",
    "answer": "Dependerá del proceso a realizar. Consulta tu proyecto con nosotros y te asesoraremos sin compromiso."
  },
  {
    "question": "¿Puedo pedir el tejido cortado en 140-150 cm o cualquier otra medida?",
    "answer": "En principio, sí. Tendremos que valorar la cantidad a cortar y el modo de realizarlo."
  },
  {
    "question": "¿Puedo estampar mi propio diseño?",
    "answer": "En principio, sí. Debemos valorar el diseño y la calidad a imprimir para darte una respuesta más concreta. Consulta sin compromiso."
  },
  {
    "question": "¿Tengo un restaurante y me gustaría personalizar los manteles jacquard con mi logo, es posible?",
    "answer": "Por supuesto, te asesoramos sin compromiso."
  },
  {
    "question": "¿Soy de México y me gustan vuestras telas, pueden enviarlas a cualquier parte del mundo?",
    "answer": "Sí, tenemos un equipo especializado en envíos internacionales."
  },
  {
    "question": "¿Tengo un hotel rural de 14 habitaciones y me gustaría saber si puedo coordinar el edredón con la cortina y los cojines? También me gustaría saber si elijo unos diseños y vosotros me hacéis los edredones, cortinas y cojines.",
    "answer": "Sí, tenemos una gran confección donde podemos acolchar y confeccionar cualquier producto."
  },
  {
    "question": "¿Tenéis tejidos estampados que puedan lavarse a alta temperatura para mis restaurantes?",
    "answer": "Sí, tenemos tejidos de poliéster mate que son ideales para hostelería. Cualquier diseño lo podemos estampar sobre estas bases, y puedes lavarlos a altas temperaturas sin que encojan ni un centímetro."
  }
];
---

<section id="faq" class="py-20 bg-white relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-gray-50 to-white"></div>
  <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"></div>
  
  <div class="container mx-auto px-4 relative">
    <div class="text-center mb-16" data-aos="fade-up">
      <h2 class="text-4xl md:text-5xl font-playfair font-bold mb-6">
        Preguntas Frecuentes
      </h2>
      <p class="text-gray-600 max-w-2xl mx-auto">
        Encuentra respuestas a las preguntas más comunes sobre nuestros servicios y productos
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="grid gap-6" data-aos="fade-up" data-aos-delay="100">
        {faqs.map((faq, index) => (
          <div 
            class="faq-item bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300"
            data-aos="fade-up"
            data-aos-delay={index * 50}
          >
            <button 
              class="faq-button w-full text-left px-6 py-4 flex items-center justify-between focus:outline-none"
              aria-expanded="false"
            >
              <span class="text-lg font-medium pr-8">{faq.question}</span>
              <span class="transform transition-transform duration-300 text-2xl opacity-70">+</span>
            </button>
            <div 
              class="faq-content overflow-hidden transition-all duration-300 max-h-0"
              style="transition: max-height 0.3s ease-out;"
            >
              <div class="px-6 pb-4 text-gray-600 prose prose-sm max-w-none">{faq.answer}</div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <div 
      class="mt-16 text-center p-8 bg-black/5 backdrop-blur-sm rounded-2xl max-w-2xl mx-auto"
      data-aos="fade-up"
      data-aos-delay="200"
    >
      <h3 class="text-xl font-medium mb-4">¿No encuentras lo que buscas?</h3>
      <p class="text-gray-600 mb-6">
        Nuestro equipo está aquí para ayudarte con cualquier pregunta adicional que puedas tener
      </p>
      <button 
        id="openContactModal"
        class="inline-block px-8 py-3 bg-black text-white rounded-full hover:bg-gray-800 transition-colors duration-300"
      >
        Contáctanos
      </button>
    </div>
  </div>

  <!-- Modal de Contacto -->
  <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
    <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 relative">
      <button id="closeModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      
      <h3 class="text-2xl font-bold mb-6">Contacta con nosotros</h3>
      
      <form id="contactForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
          <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
          <input type="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Mensaje</label>
          <textarea required rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"></textarea>
        </div>
        
        <button type="submit" class="w-full bg-black text-white py-3 rounded-lg hover:bg-gray-800 transition-colors">
          Enviar mensaje
        </button>
      </form>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    let activeButton = null;
    const buttons = document.querySelectorAll('.faq-button');
    const modal = document.getElementById('contactModal');
    const openModalBtn = document.getElementById('openContactModal');
    const closeModalBtn = document.getElementById('closeModal');
    const contactForm = document.getElementById('contactForm');
    
    // FAQ Functionality
    buttons.forEach(button => {
      button.addEventListener('click', () => {
        if (activeButton && activeButton !== button) {
          const activePanel = activeButton.nextElementSibling;
          activeButton.setAttribute('aria-expanded', 'false');
          activeButton.querySelector('span:last-child').style.transform = 'rotate(0deg)';
          activePanel.style.maxHeight = '0';
        }

        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        button.setAttribute('aria-expanded', !isExpanded);
        
        const icon = button.querySelector('span:last-child');
        icon.style.transform = isExpanded ? 'rotate(0deg)' : 'rotate(45deg)';
        
        const panel = button.nextElementSibling;
        if (!isExpanded) {
          panel.style.maxHeight = panel.scrollHeight + "px";
          activeButton = button;
        } else {
          panel.style.maxHeight = "0";
          activeButton = null;
        }
      });
    });

    // Modal Functionality
    openModalBtn?.addEventListener('click', () => {
      modal?.classList.remove('hidden');
      modal?.classList.add('flex');
    });

    closeModalBtn?.addEventListener('click', () => {
      modal?.classList.add('hidden');
      modal?.classList.remove('flex');
    });

    // Close modal when clicking outside
    modal?.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }
    });

    // Form submission
    contactForm?.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(contactForm);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        message: formData.get('message')
      };

      // Enviar email usando mailto
      const mailtoLink = `mailto:customer@sgpartners.es?subject=Consulta de ${data.name}&body=${data.message}%0D%0A%0D%0AContacto: ${data.email}`;
      window.location.href = mailtoLink;

      // Opcional: También mostrar el teléfono después del envío
      alert('También puedes contactarnos por teléfono al: +34 672 64 39 99');
      
      // Cerrar el modal
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      contactForm.reset();
    });

    // Inicializar todos los elementos cerrados
  const faqs = document.querySelectorAll('.faq-button'); // Selecciona todos los botones de FAQ
faqs.forEach(faq => {
  faq.classList.remove('active'); // Asegura que todos estén cerrados
});
  });
</script>

<style>
  .faq-item {
    position: relative;
    isolation: isolate;
  }

  .faq-item::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(to right, transparent, white 50%);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
    border-radius: inherit;
  }

  .faq-item:hover::before {
    opacity: 1;
  }

  .faq-item button[aria-expanded="true"] {
    font-weight: 600;
    color: black;
  }

  .faq-item button[aria-expanded="true"] + div {
    border-top: 1px solid rgba(0,0,0,0.1);
  }

  .faq-item button span:last-child {
    transition: transform 0.3s ease;
  }

  .prose {
    line-height: 1.6;
  }

  .prose br {
    margin-bottom: 0.5em;
  }

  .faq-item div {
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
  }

  .faq-item button:hover {
    background-color: rgba(0, 0, 0, 0.02);
  }

  .faq-item button[aria-expanded="true"] {
    background-color: rgba(0, 0, 0, 0.03);
  }
</style>